swrFile = open("t1.mat");


t = swrFile.vv.t(1:30000);
t = t-t(1);
v = swrFile.vv.v(1:30000);

%%
fs = 2000;
bs = 5;
bl = 10;
sd = 5;
rf = 100;

zv = zeros(1, length(v));
b = zeros(1, length(v));

det = detector(fs, bs, bl, sd, rf);

for i = 1:length(v)
    det = det.step(v(i));
    zv(i) = det.running_zscr;
    b(i) = det.buffer_status;
end

plot(b)